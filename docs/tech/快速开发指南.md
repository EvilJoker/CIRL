# 快速开发指南

## 环境要求

- Node.js >= 20.0.0
- npm

## 安装依赖

```bash
# 根目录
npm install

# 前端
cd web
npm install
```

## 开发

### 启动前端开发服务器

```bash
npm run dev
```

前端运行在 `http://localhost:5173`

### 启动后端服务器

```bash
npm run dev:server
```

后端运行在 `http://localhost:3001`

## 项目结构

```
cirl/
├── bin/              # CLI 工具
├── server/           # Express 后端
│   ├── index.js               # 服务器入口
│   ├── dataManager.js         # JSON 读写
│   ├── similarityService.js   # 命中相似度计算
│   └── evaluationService.js   # 评估指标计算
├── web/              # Vue 3 前端
│   └── src/
│       ├── components/
│       ├── composables/
│       ├── lib/
│       └── types/
├── data/             # 数据文件
│   ├── apps.json
│   ├── query-records.json
│   ├── feedbacks.json
│   ├── datasets.json
│   ├── hit-analyses.json
│   ├── evaluations.json
│   └── optimization-suggestions.json
└── docs/             # 文档
```

## API 接口

### 知识库管理

- `GET /api/index` - 获取知识索引
- `PUT /api/index` - 更新知识索引
- `GET /api/knowledge` - 获取知识集
- `POST /api/knowledge` - 创建知识项
- `PUT /api/knowledge/:id` - 更新知识项
- `DELETE /api/knowledge/:id` - 删除知识项

### 查询与反馈

- `POST /api/query` - 意图匹配与问答
- `GET /api/feedbacks` - 获取反馈列表
- `POST /api/feedbacks` - 提交反馈
- `GET /api/issues` - 获取问题列表
- `PUT /api/issues/:id` - 更新问题状态

### 统计

- `GET /api/stats` - 获取统计信息

## 数据文件格式

### index.json

```json
{
  "version": "1.0.0",
  "description": "知识库索引",
  "categories": [
    {
      "id": "architecture",
      "name": "架构设计",
      "keywords": ["架构", "设计"],
      "description": "核心知识"
    }
  ],
  "boundaries": [],
  "updatedAt": "2025-01-17T00:00:00.000Z"
}
```

### knowledge.json

```json
[
  {
    "id": "kb_1",
    "title": "知识标题",
    "content": "知识内容",
    "category": "architecture",
    "layer": "core",
    "stability": "stable",
    "tags": ["标签1", "标签2"],
    "createdAt": "2025-01-17T00:00:00.000Z",
    "updatedAt": "2025-01-17T00:00:00.000Z"
  }
]
```

## 构建

```bash
npm run build
```

构建产物在 `dist/` 目录。

## 调试

### 前端调试

- 使用 Vue DevTools
- 浏览器控制台查看 API 请求

### 后端调试

- 查看服务器日志
- 检查 `data/` 目录下的 JSON 文件

